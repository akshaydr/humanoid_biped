#!/usr/bin/env python

import rospy
import numpy as np
from time import sleep
from std_msgs.msg import Float64
import webbrowser

webbrowser.open("/home/ajit2/Downloads/videoplayback.mp3")

pres_time = 0.0
total_time = 12.0
initial_angle = 180.4
peak_angle = 1000.6
sample_size = 40

# Dance Trajectory
right_1 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 1988, 1988, 1988, 2036, 2036, 2036,  3080, 3080, 3080, 2036, 2036, 2036, 2036, 2936, 3288, 2936, 3288, 2936, 2936, 3288, 2936, 3288, 2936, 2036, 2036,2036, 2036, 1988, 1988, 1988, 2036, 2036, 2036,  3080, 3080, 3080, 2036, 2036, 2036, 2036, 2036, 1988, 1988, 1988, 2036, 2036, 2036,  3080, 3080, 3080, 2036, 2036, 2036]
right_2 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2136, 3098, 3098, 3098, 2136, 2036, 2136,  2136, 2136, 2136, 2136, 2136, 2036, 2236, 2236, 2236, 2236, 2236, 2236, 1836, 1836, 1836, 1836, 1836, 2236, 2036,2036, 2136, 3098, 3098, 3098, 2136, 2036, 2136,  2136, 2136, 2136, 2136, 2136, 2036, 2036, 2136, 3098, 3098, 3098, 2136, 2036, 2136,  2136, 2136, 2136, 2136, 2136, 2036]
right_3 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2117, 2117, 2117, 2036, 2036, 2036,  1073, 1073, 1073, 2036, 2036, 2036, 2036, 1028, 1108, 1028, 1108, 1028, 1028, 1108, 1028, 1108, 1028, 2036, 2036,2036, 2036, 2117, 2117, 2117, 2036, 2036, 2036,  1073, 1073, 1073, 2036, 2036, 2036, 2036, 2036, 2117, 2117, 2117, 2036, 2036, 2036,  1073, 1073, 1073, 2036, 2036, 2036]
right_4 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2177, 2177, 2177, 2036, 2036, 2036,  3064, 3064, 3064, 2036, 2036, 2036, 2036, 1997, 2006, 1997, 2006, 1997, 1997, 2006, 1997, 2006, 1997, 2036, 2036,2036, 2036, 2177, 2177, 2177, 2036, 2036, 2036,  3064, 3064, 3064, 2036, 2036, 2036, 2036, 2036, 2177, 2177, 2177, 2036, 2036, 2036,  3064, 3064, 3064, 2036, 2036, 2036]
right_5 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2093, 2093, 2093, 2036, 2036, 2036,  2173, 2173, 2173, 2036, 2036, 2036, 2036, 2127, 2067, 2127, 2067, 2127, 2127, 2067, 2127, 2067, 2127, 2036, 2036,2036, 2036, 2093, 2093, 2093, 2036, 2036, 2036,  2173, 2173, 2173, 2036, 2036, 2036, 2036, 2036, 2093, 2093, 2093, 2036, 2036, 2036,  2173, 2173, 2173, 2036, 2036, 2036]

left_1 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 1039, 1039, 1039, 2036, 2036, 2036,  2066, 2066, 2066, 2036, 2036, 2036, 2036, 1159, 828, 1159, 828, 1159, 1159, 828, 1159, 828, 1159, 2036, 2036,2036, 2036, 1039, 1039, 1039, 2036, 2036, 2036,  2066, 2066, 2066, 2036, 2036, 2036, 2036, 2036, 1039, 1039, 1039, 2036, 2036, 2036,  2066, 2066, 2066, 2036, 2036, 2036]
left_2 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2136, 2085, 2085, 2085, 2136, 2036, 2136,  3104, 3104, 3104, 2136, 2136, 2036, 2236, 1886, 1886, 1886, 1886, 1886, 2186, 2186, 2186, 2186, 2186, 2236, 2036,2036, 2136, 2085, 2085, 2085, 2136, 2036, 2136,  3104, 3104, 3104, 2136, 2136, 2036, 2036, 2136, 2085, 2085, 2085, 2136, 2036, 2136,  3104, 3104, 3104, 2136, 2136, 2036]
left_3 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 3039, 3039, 3039, 2036, 2036, 2036,  2023, 2023, 2023, 2036, 2036, 2036, 2036, 3150, 3045, 3150, 3045, 3150, 3150, 3045, 3150, 3045, 3150, 2036, 2036,2036, 2036, 3039, 3039, 3039, 2036, 2036, 2036,  2023, 2023, 2023, 2036, 2036, 2036, 2036, 2036, 3039, 3039, 3039, 2036, 2036, 2036,  2023, 2023, 2023, 2036, 2036, 2036]
left_4 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 1105, 1105, 1105, 2036, 2036, 2036,  2033, 2033, 2033, 2036, 2036, 2036, 2036, 1989, 2089, 1989, 2089, 1989, 1989, 2089, 1989, 2089, 1989, 2036, 2036,2036, 2036, 1105, 1105, 1105, 2036, 2036, 2036,  2033, 2033, 2033, 2036, 2036, 2036, 2036, 2036, 1105, 1105, 1105, 2036, 2036, 2036,  2033, 2033, 2033, 2036, 2036, 2036]
left_5 = [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2039, 2039, 2039, 2036, 2036, 2036,  2019, 2019, 2019, 2036, 2036, 2036, 2036, 1955, 2084, 1955, 2084, 1955, 1955, 2084, 1955, 2084, 1955, 2036, 2036,2036, 2036, 2039, 2039, 2039, 2036, 2036, 2036,  2019, 2019, 2019, 2036, 2036, 2036, 2036, 2036, 2039, 2039, 2039, 2036, 2036, 2036,  2019, 2019, 2019, 2036, 2036, 2036]
head =   [2036, 2036, 2036, 2036, 1500, 1500, 2572, 2572, 2036, 1500, 1500, 2572, 2572, 2036, 1500, 1500, 2572, 2572, 2036, 2036, 2036, 2559, 2559, 2559, 2036, 2036, 2036,  1620, 1620, 1620, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036,2036, 2036, 2559, 2559, 2559, 2036, 2036, 2036,  1620, 1620, 1620, 2036, 2036, 2036, 2036, 2036, 2559, 2559, 2559, 2036, 2036, 2036,  1620, 1620, 1620, 2036, 2036, 2036]

# Hand funk
# right_1 = [2036, 2036, 1988, 1988, 1988, 2036, 2036, 2036,  3080, 3080, 3080, 2036, 2036, 2036]
# right_2 = [2036, 2136, 3098, 3098, 3098, 2136, 2036, 2136,  2136, 2136, 2136, 2136, 2136, 2036]
# right_3 = [2036, 2036, 2117, 2117, 2117, 2036, 2036, 2036,  1073, 1073, 1073, 2036, 2036, 2036]
# right_4 = [2036, 2036, 2177, 2177, 2177, 2036, 2036, 2036,  3064, 3064, 3064, 2036, 2036, 2036]
# right_5 = [2036, 2036, 2093, 2093, 2093, 2036, 2036, 2036,  2173, 2173, 2173, 2036, 2036, 2036]
#
# left_1 = [2036, 2036, 1039, 1039, 1039, 2036, 2036, 2036,  2066, 2066, 2066, 2036, 2036, 2036]
# left_2 = [2036, 2136, 2085, 2085, 2085, 2136, 2036, 2136,  3104, 3104, 3104, 2136, 2136, 2036]
# left_3 = [2036, 2036, 3039, 3039, 3039, 2036, 2036, 2036,  2023, 2023, 2023, 2036, 2036, 2036]
# left_4 = [2036, 2036, 1105, 1105, 1105, 2036, 2036, 2036,  2033, 2033, 2033, 2036, 2036, 2036]
# left_5 = [2036, 2036, 2039, 2039, 2039, 2036, 2036, 2036,  2019, 2019, 2019, 2036, 2036, 2036]
# head =   [2036, 2036, 2559, 2559, 2559, 2036, 2036, 2036,  1620, 1620, 1620, 2036, 2036, 2036]

# Right wave
# right_1 = [2036, 2036, 2936, 3288, 2936, 3288, 2936, 2936, 3288, 2936, 3288, 2936, 2036, 2036]
# right_2 = [2036, 2236, 2236, 2236, 2236, 2236, 2236, 1836, 1836, 1836, 1836, 1836, 2236, 2036]
# right_3 = [2036, 2036, 1028, 1108, 1028, 1108, 1028, 1028, 1108, 1028, 1108, 1028, 2036, 2036]
# right_4 = [2036, 2036, 1997, 2006, 1997, 2006, 1997, 1997, 2006, 1997, 2006, 1997, 2036, 2036]
# right_5 = [2036, 2036, 2127, 2067, 2127, 2067, 2127, 2127, 2067, 2127, 2067, 2127, 2036, 2036]
#
# left_1 = [2036, 2036, 1159, 828, 1159, 828, 1159, 1159, 828, 1159, 828, 1159, 2036, 2036]
# left_2 = [2036, 2236, 1886, 1886, 1886, 1886, 1886, 2186, 2186, 2186, 2186, 2186, 2236, 2036]
# left_3 = [2036, 2036, 3150, 3045, 3150, 3045, 3150, 3150, 3045, 3150, 3045, 3150, 2036, 2036]
# left_4 = [2036, 2036, 1989, 2089, 1989, 2089, 1989, 1989, 2089, 1989, 2089, 1989, 2036, 2036]
# left_5 = [2036, 2036, 1955, 2084, 1955, 2084, 1955, 1955, 2084, 1955, 2084, 1955, 2036, 2036]
# head =   [2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036, 2036]

i = -1;
j = 0

def extend_sample(data, present_sample, new_sample):
    new_data = []
    for i in range(present_sample - 1):
        x = data[i]
        y = data[i+1]
        val = (y - x)/new_sample
        new_data.append(data[i])
        for j in range(new_sample):
            angle = val + x
            x = angle
            new_data.append(angle)
            j += 1
        new_data.append(data[i + 1])
        i += 1
    return new_data


if __name__ == '__main__':
    rospy.init_node('gait_generation', anonymous=True)
    pub1 = rospy.Publisher('right_1', Float64, queue_size=10)
    pub2 = rospy.Publisher('right_2', Float64, queue_size=10)
    pub3 = rospy.Publisher('right_3', Float64, queue_size=10)
    pub4 = rospy.Publisher('right_4', Float64, queue_size=10)
    pub5 = rospy.Publisher('right_5', Float64, queue_size=10)

    pub6 =  rospy.Publisher('left_1', Float64, queue_size=10)
    pub7 =  rospy.Publisher('left_2', Float64, queue_size=10)
    pub8 =  rospy.Publisher('left_3', Float64, queue_size=10)
    pub9 =  rospy.Publisher('left_4', Float64, queue_size=10)
    pub10 = rospy.Publisher('left_5', Float64, queue_size=10)

    pub11 = rospy.Publisher('head', Float64, queue_size=10)

    right_1 = extend_sample(right_1, len(right_1), sample_size)
    right_2 = extend_sample(right_2, len(right_2), sample_size)
    right_3 = extend_sample(right_3, len(right_3), sample_size)
    right_4 = extend_sample(right_4, len(right_4), sample_size)
    right_5 = extend_sample(right_5, len(right_5), sample_size)

    left_1 = extend_sample(left_1, len(left_1), sample_size)
    left_2 = extend_sample(left_2, len(left_2), sample_size)
    left_3 = extend_sample(left_3, len(left_3), sample_size)
    left_4 = extend_sample(left_4, len(left_4), sample_size)
    left_5 = extend_sample(left_5, len(left_5), sample_size)

    head = extend_sample(head, len(head), sample_size)

while (j < 4):
    while (pres_time < total_time):
        pres_time += total_time/len(right_1)
        print (right_1[i], right_2[i], right_3[i], right_4[i], right_5[i])

        pub1.publish(right_1[i])
        pub2.publish(right_2[i])
        pub3.publish(right_3[i])
        pub4.publish(right_4[i])
        pub5.publish(right_5[i])

        pub6.publish(left_1[i])
        pub7.publish(left_2[i])
        pub8.publish(left_3[i])
        pub9.publish(left_4[i])
        pub10.publish(left_5[i])

        pub11.publish(head[i])

        i += 1
        sleep(total_time/len(right_1))
    i = -1
    pres_time = 0.0
    j += 1
